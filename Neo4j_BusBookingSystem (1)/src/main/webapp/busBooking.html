<!doctype html>

  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link rel="stylesheet" href="/resources/css/bookseat2.css">
    <script src="jquery-3.6.0.min.js"></script>
    <script src="knockout-3.5.1.js"></script>
    <title> User Booking</title>
  <!-- <style>
body {
  background-image: url('/resources/img/busimg.jpeg');
  background-repeat: no-repeat;
  background-attachment: fixed;  
  background-size: cover;
}
</style>-->

 <title>Seat Selection</title>
        <style>
        h1 {text-align: center;}
        
			table, tr, td 
			{
  			border: 1px solid black;
  			padding: 5px;
			}	
			table
			 {
 				 border-spacing: 15px;
			}
			.center 
			{
  			margin-left: auto;
  			margin-right: auto;
			}
			
			.selectdSet{
				background-color: rgb(255, 0, 0);
			}
			td:nth-of-type(2) 
			{
  				 padding-right: 10px;
			}
			.space
			{
				
  				column-gap: 40px;

			}
</style>
  </head>
  <body>
 
				
				
				
	
  
    <div class="header">
        <a href="userHome">Home</a>
        <a href="UserBusList">Bus</a>
        <a href="userbook">Booking</a>
        <a href="contact">Contact</a>
        <a href="userticket">Show Ticket</a>
        <div class="leftout"> <a href="logout">Logout</a></div>
    </div>
  
        <div class="container">
            <label for="name"><b>Name</b></label>
            <input type="text" id="name" placeholder="Enter Name" name="name" required>
        
            <label for="mobileNo"><b>Mobile Number</b></label>
            <input type="text" id="mobileNo" placeholder="Enter Mobile Number" name="mobileNo" required>
            
            <label for="busName"><b>Choose a Bus:</b></label>
            <select name="busName" id="busName" data-bind="click:busName,options:busdetails,optionsText:'busName',optionsValue:'busName'">
      		</select> <br> <br>
            <label for="pickup"><b>pickup location:</b></label>
            <select name="pickup" id="pickup" type="text" data-bind="click:pickup,options:busdetails,optionsText:'pickup',optionsValue:'pickup'">
      		</select> <br> <br>
      		
      		 <!--<span id="pickup" style="font-size: 22px;"></span> <br> <br>-->
      		 
            <label for="dropoff"><b>drop-off:</b></label>
             <select name="dropoff" id="dropoff" type="text" data-bind="click:dropoff,options:busdetails,optionsText:'dropoff',optionsValue:'dropoff'">
                 </select> <br> <br>
                 
                 <!--<span id="dropoff" style="font-size: 22px;"></span> <br> <br>-->
                 
           <label for="busTime"><b>Bus Time:</b></label>
                <select name="busTime" type="number" data-bind="options:busdetails,optionsText:'busTime'" id="busTime">
           </select> <br> <br>
           
             <!--<span id="busTime" style="font-size: 22px;"></span> <br> <br>-->
             
          <p>
		<label>Email 
		<input type="email" name="email" id="email">
		</label>

		<label>Pickup Date/Time
		<input type="datetime-local" name="busTime" required id="busTime">
		</label>
		</p>
    
    
            
 
         
        
          <h1>Seat Selection</h1>
        <div class="SeatSelection">
        <table id="setTable" class="center" cellpadding="1" cellspacing="1" border="1" class="sortable">
                     
                        <tr>
                            <div class="space1">
                            <td class="seatButton" id="seat01" name="seat01">seat01</td>
                            <td class="seatButton" id="seat02" name="seat02">seat02</td>                           
								 <td>    </td>
                            <td class="seatButton" id="seat03" name="seat03">seat03</td></td>
                            <td class="seatButton" id="seat04" name="seat04">seat04</td></td>
                        </tr>
                        <tr>
                           <td class="seatButton" id="seat05" name="seat05">seat05</td></td>
                            <td class="seatButton" id="seat06" name="seat06">seat06</td></td>
                                <td>              </td>
                            <td class="seatButton" id="seat07" name="seat07">seat07</td></td>
                            <td  class="seatButton" id="seat08" name="seat08">seat08</td></td>
                        </tr>
                        <tr>
                           <td class="seatButton" id="seat09" name="seat09">seat09</td></td>
                            <td class="seatButton" id="seat10" name="seat10">seat10</td></td>
                                <td>    </td>
                            <td class="seatButton" id="seat11" name=" seat11">seat11</td></td>
                            <td class="seatButton" id="seat12" name="seat12">seat12</td></td>
                        </tr>
                        <tr>
                           <td class="seatButton" id="seat13" name="seat13">seat13</td></td>
                            <td class="seatButton" id="seat14" name="seat14">seat14</td></td>
                                <td>    </td>
                            <td class="seatButton" id="seat15" name="seat15">seat15</td></td>
                            <td class="seatButton" id="seat16" name="seat16">seat16</td></td>
                        </tr>
                       
                  

                </table><br/>
        </div>
                      <!-- <button  type="button" id="btnBookSeat">Book Seat</button> 
-->
      <label for="price"><b>Ticket per Price : </b></label> 

       <span id="mainprice"></span> <br> <br>

       <label for="showtime"><b>GST :</b></label>

       <span>18%</span> <br> <br>

       <label for="totalprice"><b>Total Price :</b></label>
       <span id="totalprice"></span> <br> <br>
       
        
       
                 <button id="addTicket"  class="btn btn-info" >Confirm Seat</button>
          		<button  type="button" ><a href="ticket">Show Ticket</a></button>
       

                    </div>
                   
   
          
    
        </div>
         
   <!-- <div class="footer"><h4>All Right Reserved 2021</h4></div>-->
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
	<script>
	   function vm(){
       	var self=this;
           self.busdetails=ko.observableArray([]);
           $.getJSON("http://192.168.1.193:8080/showAllBus",function(data){
           	console.log(data);
           	 self.busdetails(data);
           	var jsonData = ko.toJSON(data);
           });
           
           self.busshow=function(){
        	   let val1=$("#busName").val();
        	   console.log(val1);
        	   let val2=self.busdetails();
        	    val2.forEach(function(b){
        		   if(b.id==val1){
        			   $("#pickup").text(b.pickup);
        			   $("#dropoff").text(b.dropoff);
        			   $("#busTime").text(b.busTime);
        			   console.log(b.busName);
        			 
        		   }
        		   val2.forEach(function(t){
        		   if(t.id==val1){
        			   $("#busName").text(t.busName);
        		   }
        	   })
        	   
        	   });
        	   
       };
       }
       ko.applyBindings(new vm());	
	</script>
	
	 <script src="/resources/js/seatBook.js"></script>
  </body>
</html>
